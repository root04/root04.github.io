---
layout: post
title: "ruby on rails - rvm(Ruby Version Manager) -"
date: 2012-03-18T08:21:00-07:00
comments: false
categories:
 - Ruby on Rails
---


<div class='post'>
This entry is a memo about developing with ruby on rails.
<br />
<br />Prerequisites:
<br />&nbsp; - I've never used ruby
<br />&nbsp; - I've developed with MVC Framework in Java and Python
<br />
<br />First, I did some googling about ruby and etc.
<br />
<br />And decided to learn about following applications.
<br />
<br />&nbsp; - rvm(Ruby Version Manager)
<br />&nbsp; - rubygems
<br />&nbsp; - rails
<br />&nbsp; - passenger
<br />
<br />From above, this entry focuses on RVM.
<br />
<br />RVM(Ruby Version Manager) manages ruby version and gemsets.
<br />
<br />You can install many versions of rubys, and many combinations of gemsets,
<br />
<br />and choose to use a right version on right purposes.
<br />
<br />1. installing rvm
<br />go home and install it.
<br />
<br />
<br />$ cd
<br />$ bash &lt; &lt;(curl -s https://rvm.beginrescueend.com/install/rvm)
<br />
<br />You'll get
<br />Deprecated command, please use:
<br />
<br />bash -s stable &lt; &lt;(curl -s https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)
<br />
<br />So, execute the command above, instead.
<br />
<br />This installs rvm under ${HOME}/.rvm
<br />
<br />2. setup environment variables
<br />
<br />Edit .bashrc and add this line.
<br />
<br />&nbsp; [[ -s "$HOME/.rvm/scripts/rvm" ]] &amp;&amp; source "$HOME/.rvm/scripts/rvm"
<br />
<br />3. check ruby version that can be installed and install some
<br />
<br />"rvm list known" command shows what's available.
<br />
<br />$ rvm list known
<br /># MRI Rubies
<br />
<br />[ruby-]1.8.6[-p420]
<br />[ruby-]1.8.7[-p358]
<br />[ruby-]1.8.7-head
<br />[ruby-]1.9.1[-p431]
<br />[ruby-]1.9.2-p180
<br />[ruby-]1.9.2-p290
<br />[ruby-]1.9.2[-p318]
<br />[ruby-]1.9.2-head
<br />[ruby-]1.9.3-preview1
<br />[ruby-]1.9.3-rc1
<br />[ruby-]1.9.3-p0
<br />[ruby-]1.9.3[-p125]
<br />[ruby-]1.9.3-head
<br />ruby-head
<br />...snip
<br />
<br />I installed 1.9.3-p125 and&nbsp;1.8.7-p358.
<br />
<br />$ rvm install 1.9.3-p125
<br />
<div>$ rvm install 1.8.7-p358
</div>
<div>
<br />
</div>
<br />4. set default ruby
<br />
<br />$ rvm use 1.9.3-p125 --default
<br />$ ruby -v &lt;- check the version
<br />
<br />ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-linux]
<br />
<br />
<br />5. create gemsets
<br />
<br />gemset is a grouping function of gems.
<br />
<br />I can create gemset for rails version3.1 and rails version 3.2,
<br />
<br />and use it on different purpose, when ever I need to.
<br />
<br />$ rvm gemset create rails31
<br />
<br />$ rvm gemset create rails32
<br />
<br />
<br />$ rvm gemset list
<br />gemsets for ruby-1.9.3-p125 (found in ${HOME}/.rvm/gems/ruby-1.9.3-p125)
<br />&nbsp; &nbsp;global
<br />&nbsp; &nbsp;rails31
<br />&nbsp; &nbsp;rails32
<br />
<br />
<br />
<div>
<br />6. set default gemsets
</div>
<div>
<br />
</div>
<div>$ rvm use 1.9.3-p125@rails32 --default
</div>
<div>
<br />
</div>
<div>7. install passenger and rails3.2.2
</div>
<div>
<br />
</div>
<div>check where you are.
</div>
<div>
<div>$ rvm gemset list
</div>
<div>gemsets for ruby-1.9.3-p125 (found in ${HOME}/.rvm/gems/ruby-1.9.3-p125)
</div>
<div>&nbsp; &nbsp;global
</div>
<div>&nbsp; &nbsp;rails31
</div>
<div>=&gt; rails32
</div>
</div>
<div>
<br />
</div>
<div>$ gem install rails --version 3.2.2
</div>
<div>$ gem install passenger
</div>
<div>
<br />
</div>
<div>8. setup apache to use passenger(install modules and so on)
</div>
<div>
<br />
</div>
<div>a. if you use apt-get installed apache
</div>
<div>
<br />
</div>
<div>just type
</div>
<div>$ passenger-install-apache2
</div>
<div>
<br />
</div>
<div>and follow the instructions.
</div>
<div>
<br />
</div>
<div>b. if you plan to use self compiled apache
</div>
<div>
<br />
</div>
<div>&nbsp; - add apache binary path to PATH
</div>
<div>&nbsp; &nbsp; PATH=${PATH}:/usr/local/httpd/bin/
</div>
<div>&nbsp; &nbsp; export PATH
</div>
<div>&nbsp; - set APXS2 path
</div>
<div>&nbsp; - set APR_CONFIG path
</div>
<div>&nbsp; - set APU_CONFIG path
</div>
<div>
<div>&nbsp; &nbsp; APXS2=/usr/local/httpd/bin/apxs
</div>
<div>&nbsp; &nbsp;&nbsp;APR_CONFIG=/usr/local/httpd/bin/apr-1-config
</div>
<div>&nbsp; &nbsp;&nbsp;APU_CONFIG=/usr/local/httpd/bin/apu-1-config
</div>
<div>&nbsp; &nbsp;&nbsp;export APXS2
</div>
<div>&nbsp; &nbsp;&nbsp;export APR_CONFIG
</div>
<div>&nbsp; &nbsp;&nbsp;export APU_CONFIG
</div>
<div>&nbsp; - set HTTPD path
</div>
<div>&nbsp; &nbsp;&nbsp;HTTPD=/usr/local/httpd
</div>
<div>&nbsp; &nbsp;&nbsp;export HTTPD
</div>
</div>
<div>
<br />
</div>
<div>
<div>and then type
</div>
<div>$ rvmsudo passenger-install-apache2
</div>
</div>
<div>
<br />
</div>
<div>and do what the terminal saids.
</div>
<div>
<br />
</div>
<div>I'll write about executing self made ruby app on rails on the next entry.
</div>
<div>
<br />
</div>
</div>
